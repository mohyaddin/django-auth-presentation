<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">

		<style>
			.reveal h1 {
				text-transform: none;
			}
			.reveal h3 {
				text-transform: none;
			}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section><h1>Authentication In Django</h1></section>
				<section>
					<h2>Model</h2>
					<ul>
						<li>django.contrib.auth.models.User</li>
					</ul>
				</section>
				<section>
					<h1>Features</h1>
					<ul>
						<li>Login</li>
						<li>Logout</li>
						<li>Change Password</li>
						<li>Change Reset</li>
						<li>Permission</li>
						<li>Group</li>
					</ul>
				</section>
				<section>
					<h1>Views And Urls</h1>
					<ul>
						<li>LoginView</li>
						<li>LogoutView</li>
						<li>PasswordChangeView</li>
						<li>PasswordResetView</li>
					</ul>
				</section>
				<section>
					<h1>Forms</h1>
					<ul>
						<li>AuthenticationForm: Used for login</li>
						<li>UserCreationForm: Used for creating a new user</li>
						<li>PasswordChangeForm: Used for changing the password</li>
						<li>PasswordResetForm: Used for password reset requests</li>
					</ul>
				</section>
				<section>
					<h1>Middleware</h1>
					<ul>
						<li>AuthenticationMiddleware: Associates users with requests using sessions.</li>
					</ul>
				</section>
				<section>
					<section>
						<h1>Auth Backends</h1>
						<p>Django supports multiple authentication backends, allowing you to authenticate against various sources.</p>
					</section>
					<section>
						<h3>ModelBackend</h3>
					</section>
				</section>
				<section>
					<h3>Step 1: Install Django and Start a Project</h3>
					<p>
						<pre><code>pip install django
django-admin startproject myproject
cd myproject
python manage.py startapp myapp</code></pre>
					</p>
				</section>

				<section>
					<h3>Step 2: Update settings.py</h3>
					<p>Add django.contrib.auth and your app (myapp) to INSTALLED_APPS.</p>
					<pre><code>INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'myapp',
]
</code></pre>
				</section>
				<section>
					<h3>Step 3.1: Create User Authentication Views in views.py</h3>
					<p></p>
					<pre><code>from django.contrib.auth import authenticate, login, logout
from django.contrib.auth.forms import UserCreationForm
from django.shortcuts import render, redirect

def signup(request):
    if request.method == 'POST':
        form = UserCreationForm(request.POST)
        if form.is_valid():
            form.save()
            return redirect('login')
    else:
        form = UserCreationForm()
    return render(request, 'signup.html', {'form': form})
</code></pre>
				</section>

				<section>
					<h3>Step 3.2: Create User Authentication Views in views.py</h3>
					<p></p>
					<pre><code>def user_login(request):
    if request.method == 'POST':
        username = request.POST['username']
        password = request.POST['password']
        user = authenticate(request, username=username, password=password)
        if user is not None:
            login(request, user)
            return redirect('home')
        else:
            return render(request, 'login.html', {'error': 'Invalid credentials'})
    return render(request, 'login.html')
</code></pre>
				</section>

				<section>
					<h3>Step 3.3: Create User Authentication Views in views.py</h3>
					<p></p>
					<pre><code>def user_logout(request):
	logout(request)
	return redirect('login')</code></pre>
				</section>

				<section>
					<h3>Step 3.4: Create User Authentication Views in views.py</h3>
					<p></p>
					<pre><code>from django.contrib.auth import authenticate, login, logout
from django.contrib.auth.forms import UserCreationForm
from django.shortcuts import render, redirect

def signup(request):
    if request.method == 'POST':
        form = UserCreationForm(request.POST)
        if form.is_valid():
            form.save()
            return redirect('login')
    else:
        form = UserCreationForm()
    return render(request, 'signup.html', {'form': form})

def user_login(request):
    if request.method == 'POST':
        username = request.POST['username']
        password = request.POST['password']
        user = authenticate(request, username=username, password=password)
        if user is not None:
            login(request, user)
            return redirect('home')
        else:
            return render(request, 'login.html', {'error': 'Invalid credentials'})
    return render(request, 'login.html')

def user_logout(request):
    logout(request)
    return redirect('login')
</code></pre>
				</section>

				<section>
					<h3>Step 4: Define URLs in urls.py</h3>
					<pre><code>from django.contrib import admin
from django.urls import path
from myapp import views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('signup/', views.signup, name='signup'),
    path('login/', views.user_login, name='login'),
    path('logout/', views.user_logout, name='logout'),
    path('', views.home, name='home'),  # Define a home view in views.py
]
</code></pre>
				</section>

				<section>
					<h3>Step 5: Create Templates</h3>
					<p>Create HTML templates for signup.html, login.html, and other views in a templates directory
						inside your app.</p>
					<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Sign Up&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h2&gt;Sign Up&lt;/h2&gt;
    &lt;form method=&quot;post&quot;&gt;
        {% csrf_token %}
        {{ form.as_p }}
        &lt;button type=&quot;submit&quot;&gt;Sign Up&lt;/button&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
				</section>

				<section>
					<h3>Step 5: Create Templates</h3>
					<p>login.html</p>
					<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Login&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h2&gt;Login&lt;/h2&gt;
    {% if error %}
        &lt;p style=&quot;color: red;&quot;&gt;{{ error }}&lt;/p&gt;
    {% endif %}
    &lt;form method=&quot;post&quot;&gt;
        {% csrf_token %}
        &lt;label for=&quot;username&quot;&gt;Username:&lt;/label&gt;
        &lt;input type=&quot;text&quot; id=&quot;username&quot; name=&quot;username&quot;&gt;
        &lt;label for=&quot;password&quot;&gt;Password:&lt;/label&gt;
        &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot;&gt;
        &lt;button type=&quot;submit&quot;&gt;Login&lt;/button&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
				</section>

				<section>
					<h3>7. Using Built-in Authentication Views</h3>
					<p>Django provides built-in views for login, logout, and password management which you can use directly. For instance:</p>
					<pre><code>from django.urls import path
from django.contrib.auth import views as auth_views

urlpatterns = [
    path(&apos;admin/&apos;, admin.site.urls),
    path(&apos;signup/&apos;, views.signup, name=&apos;signup&apos;),
    path(&apos;login/&apos;, auth_views.LoginView.as_view(template_name=&apos;login.html&apos;), name=&apos;login&apos;),
    path(&apos;logout/&apos;, auth_views.LogoutView.as_view(), name=&apos;logout&apos;),
    path(&apos;password_change/&apos;, auth_views.PasswordChangeView.as_view(), name=&apos;password_change&apos;),
    path(&apos;password_change/done/&apos;, auth_views.PasswordChangeDoneView.as_view(), name=&apos;password_change_done&apos;),
    path(&apos;password_reset/&apos;, auth_views.PasswordResetView.as_view(), name=&apos;password_reset&apos;),
    path(&apos;password_reset/done/&apos;, auth_views.PasswordResetDoneView.as_view(), name=&apos;password_reset_done&apos;),
    path(&apos;reset/&lt;uidb64&gt;/&lt;token&gt;/&apos;, auth_views.PasswordResetConfirmView.as_view(), name=&apos;password_reset_confirm&apos;),
    path(&apos;reset/done/&apos;, auth_views.PasswordResetCompleteView.as_view(), name=&apos;password_reset_complete&apos;),
]
</code></pre>
				</section>

				<section>
					<h3>Protect With Login - Decorator</h3>
					<p></p>
				</section>
				<section>
					<section>
						<h3>1. Using the login_required Decorator</h3>
						<p>The login_required decorator is the most straightforward way to protect a view. You simply add it above your view function. If a user is not authenticated, they will be redirected to the login page.</p>
						<pre><code>from django.contrib.auth.decorators import login_required
from django.shortcuts import render

@login_required
def protected_view(request):
    return render(request, 'protected.html')
</code></pre>
					</section>
					<section>
						<h3></h3>
						<p>in `settings.py`: Ensure that you have a login URL specified so that the decorator knows where to redirect unauthenticated users.</p>
						<pre><code>LOGIN_URL = '/login/'</code></pre>
					</section>
				</section>
				<section>
					<section>
						<h3>2. Using Class-Based Views</h3>
						<p>For class-based views, you can use the LoginRequiredMixin provided by Django.</p>
						<pre><code>from django.contrib.auth.mixins import LoginRequiredMixin
from django.views.generic import TemplateView

class ProtectedView(LoginRequiredMixin, TemplateView):
    template_name = 'protected.html'
</code></pre>
					</section>
				</section>
				<section>
					<h3>3. Using URL Configuration</h3>
					<p>You can also protect an entire set of URLs by using django.contrib.auth.decorators.login_required in your URL configuration.</p>
					<pre><code>from django.urls import path
from django.contrib.auth.decorators import login_required
from myapp import views

urlpatterns = [
    path('protected/', login_required(views.protected_view), name='protected'),
]
</code></pre>
				</section>
				<section>
					<h3>permissions and groups</h3>
					<p>In Django, permissions and groups are a key part of the authentication framework. They allow you to define what actions users can perform and to manage user roles more efficiently. Here's a detailed explanation:</p>
				</section>
				<section>
					<h3>Permissions</h3>
					<p>Permissions in Django are used to define what actions a user can perform. By default, Django provides three permissions for each model:</p>
					<ul>
						<li>add_modelname</li>
						<li>change_modelname</li>
						<li>delete_modelname</li>
					</ul>
					<p>These permissions are created when you run makemigrations and migrate.</p>
				</section>
				<section>
					<h3>Custom Permissions</h3>
					<p>You can also define custom permissions in your models.</p>
					<pre><code>from django.db import models

class MyModel(models.Model):
    name = models.CharField(max_length=100)

    class Meta:
        permissions = [
            ('can_publish', 'Can Publish Posts'),
        ]
</code></pre>
				</section>
				<section>
					<h3>Checking Permissions</h3>
					<p>You can check permissions in your views or templates.</p>
					<pre><code>from django.shortcuts import render
from django.contrib.auth.decorators import permission_required

@permission_required('mymodel.can_publish')
def my_view(request):
    return render(request, 'my_template.html')
</code></pre>
				</section>
				<section>
					<h3>Groups</h3>
					<p>Groups in Django allow you to categorize users and assign permissions to these groups, which can then be inherited by the users in the group. This is useful for managing roles within an application.</p>
				</section>
				<section>
					<h3>Creating and Assigning Groups Using Admin Interface</h3>
					<p>
						You can create and assign groups either through the Django admin interface or programmatically.

					<ul>
						<li>Go to the Django admin.</li>
						<li>Navigate to the "Groups" section.</li>
						<li>Create a new group and assign the necessary permissions.</li>
					</ul>
					</p>
				</section>

				<section>
					<h3>Creating and Assigning Groups Using Programmatically</h3>
					<p>`management/commands/assign_groups.py`</p>
					<pre><code>from django.core.management.base import BaseCommand
from django.contrib.auth.models import Group, Permission
from django.contrib.contenttypes.models import ContentType
from myapp.models import MyModel

class Command(BaseCommand):
    def handle(self, *args, **options):
        # Create a group
        group, created = Group.objects.get_or_create(name='Editors')

        # Add permissions to group
        content_type = ContentType.objects.get_for_model(MyModel)
        permissions = Permission.objects.filter(content_type=content_type)
        for permission in permissions:
            group.permissions.add(permission)

        # Assign group to a user
        from django.contrib.auth.models import User
        user = User.objects.get(username='john')
        user.groups.add(group)
        user.save()
</code></pre>
				</section>
				<section>
					<h3>Using Permissions and Groups in Views</h3>
					<p>You can use decorators or mixins to enforce permissions in your views.</p>
				</section>
				<section>
					<h3>Using Permissions and Groups in Function Based Views</h3>
					<pre><code>from django.shortcuts import render
from django.contrib.auth.decorators import permission_required
from django.contrib.auth.decorators import login_required

@login_required
@permission_required('mymodel.can_publish', raise_exception=True)
def my_view(request):
    return render(request, 'my_template.html')
</code></pre>
				</section>
				<section>
					<h3>Using Permissions and Groups in Class Based Views</h3>
					<p>For class-based views, use the `PermissionRequiredMixin`.</p>
					<pre><code>from django.contrib.auth.mixins import PermissionRequiredMixin
from django.views.generic import TemplateView

class MyView(PermissionRequiredMixin, TemplateView):
    template_name = 'my_template.html'
    permission_required = 'mymodel.can_publish'</code></pre>
				</section>
				<section>
					<h3>Permissions and Groups in Templates</h3>
					<p>You can also check for permissions and group memberships in your templates.</p>
				<pre><code >{% if user.has_perm('mymodel.can_publish') %}
    <p>You have permission to publish posts.</p>
{% else %}
    <p>You do not have permission to publish posts.</p>
{% endif %}

{% if user.groups.filter(name='Editors').exists %}
    <p>You are an editor.</p>
{% else %}
    <p>You are not an editor.</p>
{% endif %}
</code></pre>
				</section>
				<section>
					<h3>Summary</h3>
					<ol>
						<li>`Permissions`: Define what actions a user can perform. Built-in permissions are provided for each model (add, change, delete), and you can define custom permissions.</li>
						<li>`Groups`: Categorize users into roles and assign permissions to these roles. Users inherit permissions from the groups they belong to.</li>
						<li>`Usage`: Check permissions and group memberships in views, either via decorators/mixins or directly in templates.</li>
					</ol>
				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ],
				slideNumber: 'c/t',
			});
		</script>
	</body>
</html>
